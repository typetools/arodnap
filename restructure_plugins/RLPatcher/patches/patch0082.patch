--- /tmp/orig-2859196418277420057.java	2025-09-24 21:40:10.996834554 +0000
+++ /home/smala009/RLF/cf-rlc/june2020_dataset_NJR/url11fb0973cf_raichuman9_Swimmer526_tgz-pJ8-fr_inria_optimization_cmaes_examples_CMAExample1J8/src/ubc/swim/gui/SwimController.java	2025-09-24 21:40:07.888617366 +0000
@@ -351,7 +351,8 @@
 				String fullFileName = "./images/" + testID + "/" + fileName + ".png";
 				
 				if (img != null) {
-					try {
+				javax.imageio.stream.ImageOutputStream stream = null;
+				try {
 						BufferedImage bi = getBufferedImage(img);
 						
 						File imgFile = new File(fullFileName);
@@ -359,7 +360,7 @@
 						Iterator<ImageWriter> imageWriters = ImageIO.getImageWritersByFormatName("png");
 						if ( imageWriters.hasNext() ) {
 						    ImageWriter writer = (ImageWriter)imageWriters.next();
-						    ImageOutputStream stream = ImageIO.createImageOutputStream(imgFile);
+						    stream = ImageIO.createImageOutputStream(imgFile);
 						    writer.setOutput(stream);
 						    ImageWriteParam param = writer.getDefaultWriteParam();
 						    writer.write(null, new IIOImage(bi, null, null), param);
@@ -369,6 +370,14 @@
 						}
 					} catch (Exception exception) {
 				      exception.printStackTrace();
+				    } finally {
+				        if (stream != null) {
+				            try {
+				                stream.close();
+				            } catch (Exception e) {
+				                e.printStackTrace();
+				            }
+				        }
 				    }
 				}
 			}
