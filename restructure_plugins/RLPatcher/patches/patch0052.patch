--- /tmp/orig-5702759309968532427.java	2025-09-24 21:37:02.291648651 +0000
+++ /home/smala009/RLF/cf-rlc/june2020_dataset_NJR/url0e7d57473a_kyorohiro_HetimaUtil_tgz-pJ8-net_hetimatan_net_http_HttpServer3xxJ8/src/net/hetimatan/util/http/TestForHttpRequest.java	2025-09-24 21:37:00.147498827 +0000
@@ -26,18 +26,30 @@
 	}
 
 	public void testEncode002() throws IOException {
-		HttpRequest uri = new HttpRequest(HttpRequestLine.decode("GET /announce HTTP/1.1\r\n"));
-		uri.addHeader(HttpRequestHeader.decode("User-agent: Mozilla/5.0 (Linux; U; Android 2.2.1; ja-jp; Full Android Build/MASTER) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\r\n"));
-		CashKyoroFile output = new CashKyoroFile(512);
-		uri.encode(output.getLastOutput());
-
-		output.seek(0);
-		byte[] buffer = new byte[(int)output.length()];
-		int len = output.read(buffer);
-		String tag = new String(buffer, 0, len);
-		assertEquals("GET /announce HTTP/1.1\r\n"
+	net.hetimatan.util.http.HttpRequest uri = null;
+	try {
+	    uri = new HttpRequest(HttpRequestLine.decode("GET /announce HTTP/1.1\r\n"));
+	    uri.addHeader(HttpRequestHeader.decode("User-agent: Mozilla/5.0 (Linux; U; Android 2.2.1; ja-jp; Full Android Build/MASTER) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\r\n"));
+	    CashKyoroFile output = new CashKyoroFile(512);
+	    uri.encode(output.getLastOutput());
+	    output.seek(0);
+	    byte[] buffer = new byte[(int)output.length()];
+	    int len = output.read(buffer);
+	    String tag = new String(buffer, 0, len);
+	    assertEquals("GET /announce HTTP/1.1\r\n"
 		+"User-agent: Mozilla/5.0 (Linux; U; Android 2.2.1; ja-jp; Full Android Build/MASTER) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\r\n"
 		+"\r\n", tag);
+	} finally {
+	    if (uri != null) {
+	        try {
+	            uri.createEncode(null);
+	        } catch (Exception e) {
+	            e.printStackTrace();
+	        }
+	    }
+	}
+
+
 	}
 
 	public void testEncode003() throws IOException {
