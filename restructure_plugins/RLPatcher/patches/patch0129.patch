--- /tmp/orig-14860834138641044503.java	2025-09-24 21:45:41.851954893 +0000
+++ /home/smala009/RLF/cf-rlc/june2020_dataset_NJR/url27a7ae3508_serkan_ozal_ocean_of_memories_tgz-pJ8-com_zeroturnaround_rebellabs_oceanofmemories_article1_objectlayout_ObjectMemoryLayoutDemoJ8/src/com/zeroturnaround/rebellabs/oceanofmemories/article2/OffHeapWithMemoryMappedFileDemo.java	2025-09-24 21:45:40.483859260 +0000
@@ -13,10 +13,10 @@
 	public static void main(String[] args) {
 		final int ELEMENT_COUNT = 1000;
 		int key = 1000;
-		OffHeapBenchmarkWorker runner = 
-				new MemoryMappedFileBasedOffHeapBenchmarkWorker(ELEMENT_COUNT);
-		
-		for (int i = 0; i < ELEMENT_COUNT; i++, key++) {
+		com.zeroturnaround.rebellabs.oceanofmemories.article2.benchmark.OffHeapBenchmarkWorker runner = null;
+		try {
+		    runner = new MemoryMappedFileBasedOffHeapBenchmarkWorker(ELEMENT_COUNT);
+		    for (int i = 0; i < ELEMENT_COUNT; i++, key++) {
 			OffHeapBenchmarkTrade element = runner.createElement();
 			element.setTradeId(key << 1);
 			element.setClientId(key << 2);
@@ -27,10 +27,20 @@
 			element.setSide((char) (key % 128));
 			runner.saveElement(element);
 		}
-
-		for (int i = 0; i < ELEMENT_COUNT; i++, key++) {
+		    for (int i = 0; i < ELEMENT_COUNT; i++, key++) {
 			System.out.println(runner.getElement(i));
 		}
+		} finally {
+		    if (runner != null) {
+		        try {
+		            runner.finish();
+		        } catch (Exception e) {
+		            e.printStackTrace();
+		        }
+		    }
+		}
+		
+
 	}
 
 }
